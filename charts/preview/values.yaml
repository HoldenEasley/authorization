
expose:
  Annotations:
    helm.sh/hook: post-install,post-upgrade
    helm.sh/hook-delete-policy: hook-succeeded
  config:
    exposer: Ingress
    http: true
    tlsacme: false

cleanup:
  Args:
    - --cleanup
  Annotations:
    helm.sh/hook: pre-delete
    helm.sh/hook-delete-policy: hook-succeeded

preview:
  image:
    repository:
    tag:
    pullPolicy: IfNotPresent
  env:
    SPRING_PROFILES_ACTIVE: postgres
    POSTGRES_DATABASE_HOST: preview-authorization-db-proxy
    POSTGRES_DATABASE_PORT: "5432"
    POSTGRES_DATABASE_USER_NAME: su_username
    POSTGRES_DATABASE_PASSWORD: su_password
  envFromSecretRef: []

# Stolon Configuration
authorization-db:
  superuserUsername: su_username
  superuserPassword: su_password
  replicationUsername: rp_username
  replicationPassword: rp_password
  clusterSpec:
    synchronousReplication: true
    minSynchronousStandbys: 1 # quorum-like replication
    maxSynchronousStandbys: 1 # quorum-like replication
    initMode: new
  pgParameters:
    max_connections: 100